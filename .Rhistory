swaps[which(is.na(swaps$swap1y)),]
which(is.na(swaps$swap1y))
NAs = which(is.na(swaps$swap1y))
swaps$swap1y[NAs]
NAs
swaps$swap1y[NAs-1]
rm(NAs)
while(which(is.na(swaps$swap1y))){
NAs = which(is.na(swaps$swap1y))
swaps$swap1y[NAs-1] = swaps$swap1y[NAs-1]
}
which(is.na(swaps$swap1y))
which(is.na(swaps$Dates))
NAs = which(is.na(swaps$swap1y))
swaps$swap1y[NAs-1] = swaps$swap1y[NAs-1]
which(is.na(swaps$swap1y))
swaps$swap1y[NAs] = swaps$swap1y[NAs-1]
NAs = which(is.na(swaps$swap1y))
NAs
swaps$swap1y[NAs] = swaps$swap1y[NAs-1]
NAs
NAs = which(is.na(swaps$swap1y))
NAs
while(which(is.na(swaps$swap1y))){
NAs = which(is.na(swaps$swap1y))
swaps$swap1y[NAs] = swaps$swap1y[NAs-1]
}
which(is.na(swaps$swap1y))
while(length(which(is.na(swaps$swap1y)))>0){
NAs = which(is.na(swaps$swap1y))
swaps$swap1y[NAs] = swaps$swap1y[NAs-1]
}
col(swaps)
names[swaps]
names(swaps)
names(swaps)[-1]
swaps = full_join(swap1y, swap3m, by = 'Date')
NAs = which(is.na(swaps$swap1y))
while(length(NAs)>0){
swaps$swap1y[NAs] = swaps$swap1y[NAs-1]
NAs = which(is.na(swaps$swap1y))
}
which(is.na(swaps$swap1y))
swaps$swap1y
which(is.na(swaps[['swap1y']]))
swaps[['swap1y']]
sapply(names(swaps)[-1], function(x){
NAs = which(is.na(swaps[[x]]))
while(length(NAs)>0){
swaps[[x]][NAs] = swaps[[x]][NAs-1]
NAs = which(is.na(swaps[[x]]))
}
}
which(is.na(swaps$swap3m))
which(is.na(swaps$swap3m))
sapply(names(swaps)[-1], function(x){
NAs = which(is.na(swaps[[x]]))
while(length(NAs)>0){
swaps[[x]][NAs] = swaps[[x]][NAs-1]
NAs = which(is.na(swaps[[x]]))
}
}
sapply(names(swaps)[-1], function(x){
NAs = which(is.na(swaps[[x]]))
while(length(NAs)>0){
swaps[[x]][NAs] = swaps[[x]][NAs-1]
NAs = which(is.na(swaps[[x]]))
}
})
which(is.na(swaps$swap3m))
sapply(names(swaps)[-1], function(x){
NAs = which(is.na(swaps[[x]]))
while(length(NAs)>0){
swaps[[x]][NAs] = swaps[[x]][NAs-1]
NAs = which(is.na(swaps[[x]]))
}
})
sapply(names(swaps)[-1], function(x){
NAs = which(is.na(swaps[[x]]))
while(length(NAs)>0){
swaps[[x]][NAs] = swaps[[x]][NAs-1]
NAs = which(is.na(swaps[[x]]))
}
})
sapply(names(swaps)[-1], function(x){
NAs = which(is.na(swaps[[x]]))
while(length(NAs)>0){
swaps[[x]][NAs] = swaps[[x]][NAs-1]
NAs = which(is.na(swaps[[x]]))
}
})
browser()
sapply(names(swaps)[-1], function(x){
NAs = which(is.na(swaps[[x]]))
while(length(NAs)>0){
swaps[[x]][NAs] = swaps[[x]][NAs-1]
NAs = which(is.na(swaps[[x]]))
}
})
sapply(names(swaps)[-1], function(x){
browser()
NAs = which(is.na(swaps[[x]]))
while(length(NAs)>0){
swaps[[x]][NAs] = swaps[[x]][NAs-1]
NAs = which(is.na(swaps[[x]]))
}
})
View(swaps)
which(is.na(swaps$swap3m))
which(is.na(swaps$swap1y))
View(swaps)
swaps = full_join(swap1y, swap3m, by = 'Date')
View(swaps)
swaps = full_join(swap1y, swap3m, by = 'Date')
View(swap1y)
View(swap3m)
install.packages("foreach")
View(swaps)
plot(swaps$swap3m)
plot(swaps$swap3m, type = 'l')
library("foreach", lib.loc="~/R/win-library/3.1")
names(swaps)[-1]
foreach( names(swaps)[-1]) %do% {
browser()
NAs = which(is.na(swaps[[x]]))
while(length(NAs)>0){
swaps[[x]][NAs] = swaps[[x]][NAs-1]
NAs = which(is.na(swaps[[x]]))
}
}
foreach( x=names(swaps)[-1]) %do% {
browser()
NAs = which(is.na(swaps[[x]]))
while(length(NAs)>0){
swaps[[x]][NAs] = swaps[[x]][NAs-1]
NAs = which(is.na(swaps[[x]]))
}
}
View(swaps)
which(is.na(swaps$swap1y))
which(is.na(swaps$swap3m))
xts(swaps)
require(xts)
xts(swaps)
xts(swaps, 'Date')
xts(swaps, Date)
xts(swaps, swaps$Date)
xts(swaps[-1], swaps$Date)
plot(xts(swaps[-1], swaps$Date))
plot(xts(swaps[-1], swaps$Date), type='p')
require(quantmod)
Next(c(1:10))
Next(c(1:10), 1)
Next(c(1:10), 2)
Next(c(1:10), -1)
Next(c(1:10), 1)
Lag(c(1:10), 1)
Lag(c(1:10), 0:3)
require(dplyr)
require(tydir)
require(tidyr)
gather(swaps)
gather(swaps, 'Date', 'swap', 2:3)
require(ggplot2)
ggplot(gather(swaps, 'Date', 'swap', 2:3), aes(x = 'Date')
)
ggplot(gather(swaps, 'Date', 'swap', 2:3), aes(x = 'Date')) + geom_line()
ggplot(gather(swaps, 'Date', 'swap', 2:3), aes(x = 'Date', y='Value')) + geom_line()
ggplot(gather(swaps, 'Date', 'swap', 2:3), aes(x = Date, y=Value)) + geom_line()
plotswap = gather(swaps, 'Date', 'swap', 2:3)
View(plotswap)
plotswap = gather(swaps, 'period', 'swap', 2:3)
View(plotswap)
View(plotswap)
View(plotswap)
plotswap = gather(swaps, 'period', 'swap', 2:3)
ggplot(, aes(x = Date, y=swap)) + geom_line()
ggplot(, aes( y=swap)) + geom_line()
ggplot(, aes(x = Date, y=swap)) + geom_line()
View(plotswap)
ggplot(, aes(x = 'Date', y='swap')) + geom_line()
View(plotswap)
ggplot(, aes(x = 'Date', y='swap', color='period')) + geom_line()
ggplot(plotswap, aes(x = 'Date', y='swap', color='period')) + geom_line()
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date>as.Date('2006-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
rub = read.csv(text=readClipboard())
View(rub)
rub %>% select('X.DATE.')
rub %>% select(3, 8)
rub = rub %>% select(3, 8)
names(rub)
names(rub) = c('Dates', 'UsdRub')
head(swaps)
head(rub)
as.Date(rub$Dates, format='%Y%m%d')
rub$Dates
as.Date(rub$Dates, format='%Y%m%d')
as.Date(as.character(rub$Dates), format='%Y%m%d')
rub$Dates = as.Date(as.character(rub$Dates), format='%Y%m%d')
left_join(rub, swaps, by='Date')
names(rub) = c('Date', 'UsdRub')
left_join(rub, swaps, by='Date')
rubswap = left_join(rub, swaps, by='Date')
rubswap %>% mutate(swap3m/UsdRub/90*365)
rubswap %>% mutate(swap3m/1000/UsdRub/90*365)
rubswap %>% mutate(swap3m/1000/UsdRub/90)
rubswap %>% mutate(swap3m/100/UsdRub/90)
rubswap %>% mutate(swap1y/100/UsdRub)
rubswap %>% mutate(swap1y/1000/UsdRub)
rubswap %>% mutate(swap1y/1000000/UsdRub)
rubswap %>% mutate(swap1y/1000000/UsdRub*365)
rubswap %>% mutate(swap1y/1000000/UsdRub*365)
tail(rubswap %>% mutate(swap1y/1000000/UsdRub*365))
tail(rubswap %>% mutate(swap3m/1000000/UsdRub*365))
tail(rubswap %>% mutate(swap3m/1000000/UsdRub*90))
tail(rubswap %>% mutate(swap3m_perc = swap3m/1000000/UsdRub*90))
tail(rubswap %>% mutate(swap3m_perc = swap3m/1000000/UsdRub*90), swap1y_perc = swap3m/1000000/UsdRub*365))
tail(rubswap %>% mutate(swap3m_perc = swap3m/1000000/UsdRub*90, swap1y_perc = swap3m/1000000/UsdRub*365))
tail(rubswap %>% mutate(swap3m_perc = swap3m/1000000/UsdRub*90, swap1y_perc = swap1y/1000000/UsdRub*365))
rubswap = tail(rubswap %>% mutate(swap3m_perc = swap3m/1000000/UsdRub*90, swap1y_perc = swap1y/1000000/UsdRub*365))
plotswap = gather(rubswap, 'period', 'swap', 5:6) %>% filter(Date>as.Date('2006-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
rubswap
rubswap = left_join(rub, swaps, by='Date')
rubswap = (rubswap %>% mutate(swap3m_perc = swap3m/1000000/UsdRub*90, swap1y_perc = swap1y/1000000/UsdRub*365))
plotswap = gather(rubswap, 'period', 'swap', 5:6) %>% filter(Date>as.Date('2006-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
which(is.na(rubswap$swap3m))
View(rubswap)
View(rubswap)
View(rubswap)
View(rub)
View(rubswap)
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
plotswap = gather(rubswap, 'period', 'swap', 5:6)
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
require(quantmod)
require(dplyr)
require(foreach)
require(tidyr)
require(ggplot2)
require(quantmod, quietly = T)
getFX('USD/RUB', from = '2003-01-01')
plot(USDRUB)
str(USDRUB)
glimpse(USDRUB)
Cl(USDRUB)
ClCl(USDRUB)
View(USDRUB)
USDRUB$Data
oanda.currencies
USDRUB$USD.RUB
getFX('USD/JPY', from = '2003-01-01')
View(USDJPY)
plot(USDRUB)
plot(USDJPY)
getFX('USD/RUB', from = '2003-01-01', to = '2004-01-01')
plot(USDRUB)
rubble = getFX('USD/RUB', from = '2003-01-01', to = '2004-01-01')
rm(rubble)
paste(2000 + i + 1, '-01-01')
paste(2000 + 2 + 1, '-01-01')
paste(2000 + 2 + 1, '-01-01', sep='')
allUSDRUB = NULL
allUSDRUB = NULL
foreach (i = 1:15) %do% {
getFX('USD/RUB', from = paste(2000 + i, '-01-01', sep=''), to = paste(2000 + i + 1, '-01-01', sep='') )
allUSDRUB = union(allUSDRUB, USDRUB)
}
allUSDRUB
allUSDRUB = NULL
foreach (i = 1:15) %do% {
getFX('USD/RUB', from = paste(2000 + i, '-01-01', sep=''), to = paste(2000 + i + 1, '-01-01', sep='') )
if(is.null(allUSDRUB)) allUSDRUB = USDRUB else
allUSDRUB = union(allUSDRUB, USDRUB)
}
allUSDRUB
str(USDRUB)
as.data.frame(USDRUB)
allUSDRUB = NULL
foreach (i = 1:15) %do% {
getFX('USD/RUB', from = paste(2000 + i, '-01-01', sep=''), to = paste(2000 + i + 1, '-01-01', sep='') )
if(is.null(allUSDRUB)) allUSDRUB = as.data.frame(USDRUB) else
allUSDRUB = union(allUSDRUB, as.data.frame(USDRUB))
}
View(allUSDRUB)
l
allUSDRUB = NULL
foreach (i = 1:15) %do% {
getFX('USD/RUB', from = paste(2000 + i, '-01-01', sep=''), to = paste(2000 + i + 1, '-01-01', sep='') )
if(is.null(allUSDRUB)) allUSDRUB = as.data.frame(USDRUB) else
allUSDRUB = bind_rows(allUSDRUB, as.data.frame(USDRUB))
}
View(allUSDRUB)
as.data.frame(USDRUB)
allUSDRUB = NULL
foreach (i = 1:15) %do% {
getFX('USD/RUB', from = paste(2000 + i, '-01-01', sep=''), to = paste(2000 + i + 1, '-01-01', sep=''),  )
if(is.null(allUSDRUB)) {
allUSDRUB = as.data.frame(USDRUB)
allUSDRUB$Date = row.names(allUSDRUB)
} else {
USDRUB = as.data.frame(USDRUB)
USDRUB$Date = row.names(USDRUB)
allUSDRUB = bind_rows(allUSDRUB, as.data.frame(USDRUB))
}
}
View(allUSDRUB)
plot(allUSDRUB)
plot(allUSDRUB$USD.RUB)
as.xts(allUSDRUB)
allUSDRUB(c('Date', 'USD.RUB'))
allUSDRUB(, c('Date', 'USD.RUB'))
allUSDRUB[, c('Date', 'USD.RUB')]
as.xts(allUSDRUB[, c('Date', 'USD.RUB')])
allUSDRUB = (allUSDRUB[, c('Date', 'USD.RUB')])
allUSDRUB$Date = as.Date(allUSDRUB$Date)
as.xts(allUSDRUB)
allUSDRUB
as.xts(allUSDRUB)
allUSDRUB$Date = as.POSIXlt(allUSDRUB$Date)
as.xts(allUSDRUB)
allUSDRUB
allUSDRUB = NULL
foreach (i = 1:15) %do% {
getFX('USD/RUB', from = paste(2000 + i, '-01-01', sep=''), to = paste(2000 + i + 1, '-01-01', sep=''),  )
if(is.null(allUSDRUB)) {
allUSDRUB = as.data.frame(USDRUB)
allUSDRUB$Date = row.names(allUSDRUB)
} else {
USDRUB = as.data.frame(USDRUB)
USDRUB$Date = row.names(USDRUB)
allUSDRUB = bind_rows(allUSDRUB, as.data.frame(USDRUB))
}
}
View(allUSDRUB)
allUSDRUB = (allUSDRUB[, c('Date', 'USD.RUB')])
allUSDRUB$Date = as.Date(allUSDRUB$Date)
allUSDRUB = as.data.frame(allUSDRUB)
as.xts(allUSDRUB
)
allUSDRUB
try.xts(allUSDRUB)
try.xts(allUSDRUB, dateFormat='Date')
allUSDRUB$Date = as.character(allUSDRUB$Date)
try.xts(allUSDRUB, dateFormat='Date')
allUSDRUB
try.xts(allUSDRUB, dateFormat='POSIXct')
as.POSIXlt(allUSDRUB$Date)
allUSDRUB$Date = as.POSIXlt(allUSDRUB$Date)
try.xts(allUSDRUB, dateFormat='POSIXlt')
allUSDRUB
allUSDRUB$Date = as.character(allUSDRUB$Date)
allUSDRUB
try.xts(allUSDRUB, dateFormat='POSIXlt')
allUSDRUB$Date = as.character(allUSDRUB$Date)
head(allUSDRUB)
typeof(allUSDRUB$Date)
allUSDRUB
try.xts(allUSDRUB, dateFormat='POSIXlt')
try.xts(allUSDRUB, dateFormat='%Y-%m-%d')
try.xts(allUSDRUB, dateFormat='Date')
library("xts", lib.loc="~/R/win-library/3.1")
try.xts(allUSDRUB, dateFormat='Date')
allUSDRUB[,2]
try.xts(x = allUSDRUB[,2], index = as.Date( allUSDRUB[,1]))
try.xts(x = allUSDRUB[,2], index = as.Date( allUSDRUB[,1]), oreder.by=names())
try.xts(x = allUSDRUB[,2], index = as.Date( allUSDRUB[,1]), order.by=names())
as.xts(x = allUSDRUB[,2], index = as.Date( allUSDRUB[,1]))
.xts(x = allUSDRUB[,2], index = as.Date(allUSDRUB[,1]))
xall = .xts(x = allUSDRUB[,2], index = as.Date(allUSDRUB[,1]))
View(xall)
View(allUSDRUB)
allUSDRUB[,2]
allUSDRUB[,1:2]
allUSDRUB[, 2, drop=F]
xall = .xts(x = allUSDRUB[, 2, drop=F], index = as.Date(allUSDRUB[,1]))
View(xall)
allUSDRUB = .xts(x = allUSDRUB[, 2, drop=F], index = as.Date(allUSDRUB[,1]))
rm(xall)
plot(allUSDRUB )
View(swaps)
allUSDRUB
left_join(allUSDRUB, swaps, by='Date')
left_join(as.data.frame(allUSDRUB), swaps, by='Date')
allUSDRUB$Date = row.names(allUSDRUB)
left_join(allUSDRUB, swaps, by='Date')
allUSDRUB = as.data.frame(allUSDRUB)
allUSDRUB$Date = row.names(allUSDRUB)
left_join(allUSDRUB, swaps, by='Date')
allUSDRUB$Date = as.Date(allUSDRUB$Date)
left_join(allUSDRUB, swaps, by='Date')
allUSDRUB
require(quantmod, quietly = T)
library(dplyr, quietly = T)
View(allUSDRUB)
library("zoo", lib.loc="~/R/win-library/3.1")
swaptest = full_join(swap1y, swap3m, by = 'Date')
na.approx(swaptest)
View(swaptest)
na.approx(swaptest, na.rm = F)
na.approx(as.data.frame(swaptest(), na.rm = F)
na.approx(as.data.frame(swaptest), na.rm = F)
na.approx(as.zoo(swaptest), na.rm = F)
detach("package:zoo", unload=TRUE)
library("zoo", lib.loc="~/R/win-library/3.1")
na.locf(swaptest)
View(na.locf(swaptest))
View(swaptest)
rev(1:10)
swaptest = (na.locf(swaptest))
View(swaptest)
swaptest = full_join(swap1y, swap3m, by = 'Date')
(na.locf(swaptest[,2:3]))
plot(xts(swaps[-1], swaps$Date), type='p')
swaps = full_join(swap1y, swap3m, by = 'Date') %>%
na.locf(swaptest)
swaps = full_join(swap1y, swap3m, by = 'Date')
swaps = full_join(swap1y, swap3m, by = 'Date') %>%
na.locf()
View(swaps)
plot(xts(swaps[-1], swaps$Date), type='p')
plot(xts(swaps[-1], swaps$Date), type='p')
swaps$Date = as.Date(swaps$Date)
plot(xts(swaps[-1], swaps$Date), type='p')
plot(xts(swaps[-1], swaps$Date), type='p')
plot(xts(swaps[2], swaps$Date), type='p')
plot(xts(swaps[3], swaps$Date), type='p')
plot(xts(swaps[2], swaps$Date), type='p')
plot(xts(swaps[-1], swaps$Date), type='l')
swaps = full_join(swap1y, swap3m, by = 'Date')
plot(xts(swaps[-1], swaps$Date), type='l')
View(swaps)
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date<as.Date('2006-01-01'))
require(tidyr)
require(ggplot2)
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date<as.Date('2006-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
plotswap = gather(swaps, 'period', 'swap', 2:3)
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date>as.Date('2005-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
swaps = full_join(swap1y, swap3m, by = 'Date') %>%
na.locf()
swaps$Date = as.Date(swaps$Date)
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date>as.Date('2005-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
plotswap
swaps
View(swaps)
plotswap = gather(swaps, 'period', 'swap', 2:3)
View(plotswap)
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
swaps = full_join(swap1y, swap3m, by = 'Date')
swaps$Date = as.Date(swaps$Date)
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date>as.Date('2005-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
swaps = full_join(swap1y, swap3m, by = 'Date') %>%
na.locf()
swaps$Date = as.Date(swaps$Date)
swaps = as.data.frame(swaps)
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date>as.Date('2005-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
View(swaps)
swaps = full_join(swap1y, swap3m, by = 'Date')
swaps = na.locf(swaps)
swaps = full_join(swap1y, swap3m, by = 'Date')
allUSDRUB = NULL
foreach (i = 1:15) %do% {
getFX('USD/RUB', from = paste(2000 + i, '-01-01', sep=''), to = paste(2000 + i + 1, '-01-01', sep=''),  )
if(is.null(allUSDRUB)) {
allUSDRUB = USDRUB
#       allUSDRUB = as.data.frame(USDRUB)
#       allUSDRUB$Date = row.names(allUSDRUB)
#
} else {
#       USDRUB = as.data.frame(USDRUB)
#       USDRUB$Date = row.names(USDRUB)
allUSDRUB = c(allUSDRUB, USDRUB)
}
}
require(foreach)
allUSDRUB = NULL
foreach (i = 1:15) %do% {
getFX('USD/RUB', from = paste(2000 + i, '-01-01', sep=''), to = paste(2000 + i + 1, '-01-01', sep=''),  )
if(is.null(allUSDRUB)) {
allUSDRUB = USDRUB
#       allUSDRUB = as.data.frame(USDRUB)
#       allUSDRUB$Date = row.names(allUSDRUB)
#
} else {
#       USDRUB = as.data.frame(USDRUB)
#       USDRUB$Date = row.names(USDRUB)
allUSDRUB = c(allUSDRUB, USDRUB)
}
}
plot(allUSDRUB)
rubtest = na.locf.xts(allUSDRUB)
rubtest = na.locf(allUSDRUB)
plot(allUSDRUB)
View(rubtest)
na.locf(c(1, NA, 2))
na.locf(data.frame(xx = c(1, NA, 2)))
na.locf(data.frame(xx = c(1, NA, 2), yy = c(2, NA, NA)))
swaps = full_join(swap1y, swap3m, by = 'Date')
na.locf(swaps[,2:3])
swaps = na.locf(swaps)
na.locf(swaps)
typeof(swaps)
typeof(swaps$swap1y)
