typeof(allUSDRUB$Date)
allUSDRUB
try.xts(allUSDRUB, dateFormat='POSIXlt')
try.xts(allUSDRUB, dateFormat='%Y-%m-%d')
try.xts(allUSDRUB, dateFormat='Date')
library("xts", lib.loc="~/R/win-library/3.1")
try.xts(allUSDRUB, dateFormat='Date')
allUSDRUB[,2]
try.xts(x = allUSDRUB[,2], index = as.Date( allUSDRUB[,1]))
try.xts(x = allUSDRUB[,2], index = as.Date( allUSDRUB[,1]), oreder.by=names())
try.xts(x = allUSDRUB[,2], index = as.Date( allUSDRUB[,1]), order.by=names())
as.xts(x = allUSDRUB[,2], index = as.Date( allUSDRUB[,1]))
.xts(x = allUSDRUB[,2], index = as.Date(allUSDRUB[,1]))
xall = .xts(x = allUSDRUB[,2], index = as.Date(allUSDRUB[,1]))
View(xall)
View(allUSDRUB)
allUSDRUB[,2]
allUSDRUB[,1:2]
allUSDRUB[, 2, drop=F]
xall = .xts(x = allUSDRUB[, 2, drop=F], index = as.Date(allUSDRUB[,1]))
View(xall)
allUSDRUB = .xts(x = allUSDRUB[, 2, drop=F], index = as.Date(allUSDRUB[,1]))
rm(xall)
plot(allUSDRUB )
View(swaps)
allUSDRUB
left_join(allUSDRUB, swaps, by='Date')
left_join(as.data.frame(allUSDRUB), swaps, by='Date')
allUSDRUB$Date = row.names(allUSDRUB)
left_join(allUSDRUB, swaps, by='Date')
allUSDRUB = as.data.frame(allUSDRUB)
allUSDRUB$Date = row.names(allUSDRUB)
left_join(allUSDRUB, swaps, by='Date')
allUSDRUB$Date = as.Date(allUSDRUB$Date)
left_join(allUSDRUB, swaps, by='Date')
allUSDRUB
require(quantmod, quietly = T)
library(dplyr, quietly = T)
View(allUSDRUB)
library("zoo", lib.loc="~/R/win-library/3.1")
swaptest = full_join(swap1y, swap3m, by = 'Date')
na.approx(swaptest)
View(swaptest)
na.approx(swaptest, na.rm = F)
na.approx(as.data.frame(swaptest(), na.rm = F)
na.approx(as.data.frame(swaptest), na.rm = F)
na.approx(as.zoo(swaptest), na.rm = F)
detach("package:zoo", unload=TRUE)
library("zoo", lib.loc="~/R/win-library/3.1")
na.locf(swaptest)
View(na.locf(swaptest))
View(swaptest)
rev(1:10)
swaptest = (na.locf(swaptest))
View(swaptest)
swaptest = full_join(swap1y, swap3m, by = 'Date')
(na.locf(swaptest[,2:3]))
plot(xts(swaps[-1], swaps$Date), type='p')
swaps = full_join(swap1y, swap3m, by = 'Date') %>%
na.locf(swaptest)
swaps = full_join(swap1y, swap3m, by = 'Date')
swaps = full_join(swap1y, swap3m, by = 'Date') %>%
na.locf()
View(swaps)
plot(xts(swaps[-1], swaps$Date), type='p')
plot(xts(swaps[-1], swaps$Date), type='p')
swaps$Date = as.Date(swaps$Date)
plot(xts(swaps[-1], swaps$Date), type='p')
plot(xts(swaps[-1], swaps$Date), type='p')
plot(xts(swaps[2], swaps$Date), type='p')
plot(xts(swaps[3], swaps$Date), type='p')
plot(xts(swaps[2], swaps$Date), type='p')
plot(xts(swaps[-1], swaps$Date), type='l')
swaps = full_join(swap1y, swap3m, by = 'Date')
plot(xts(swaps[-1], swaps$Date), type='l')
View(swaps)
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date<as.Date('2006-01-01'))
require(tidyr)
require(ggplot2)
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date<as.Date('2006-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
plotswap = gather(swaps, 'period', 'swap', 2:3)
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date>as.Date('2005-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
swaps = full_join(swap1y, swap3m, by = 'Date') %>%
na.locf()
swaps$Date = as.Date(swaps$Date)
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date>as.Date('2005-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
plotswap
swaps
View(swaps)
plotswap = gather(swaps, 'period', 'swap', 2:3)
View(plotswap)
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
swaps = full_join(swap1y, swap3m, by = 'Date')
swaps$Date = as.Date(swaps$Date)
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date>as.Date('2005-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
swaps = full_join(swap1y, swap3m, by = 'Date') %>%
na.locf()
swaps$Date = as.Date(swaps$Date)
swaps = as.data.frame(swaps)
plotswap = gather(swaps, 'period', 'swap', 2:3) %>% filter(Date>as.Date('2005-01-01'))
ggplot(plotswap, aes(x = Date, y=swap, color=period)) + geom_line()
View(swaps)
swaps = full_join(swap1y, swap3m, by = 'Date')
swaps = na.locf(swaps)
swaps = full_join(swap1y, swap3m, by = 'Date')
allUSDRUB = NULL
foreach (i = 1:15) %do% {
getFX('USD/RUB', from = paste(2000 + i, '-01-01', sep=''), to = paste(2000 + i + 1, '-01-01', sep=''),  )
if(is.null(allUSDRUB)) {
allUSDRUB = USDRUB
#       allUSDRUB = as.data.frame(USDRUB)
#       allUSDRUB$Date = row.names(allUSDRUB)
#
} else {
#       USDRUB = as.data.frame(USDRUB)
#       USDRUB$Date = row.names(USDRUB)
allUSDRUB = c(allUSDRUB, USDRUB)
}
}
require(foreach)
allUSDRUB = NULL
foreach (i = 1:15) %do% {
getFX('USD/RUB', from = paste(2000 + i, '-01-01', sep=''), to = paste(2000 + i + 1, '-01-01', sep=''),  )
if(is.null(allUSDRUB)) {
allUSDRUB = USDRUB
#       allUSDRUB = as.data.frame(USDRUB)
#       allUSDRUB$Date = row.names(allUSDRUB)
#
} else {
#       USDRUB = as.data.frame(USDRUB)
#       USDRUB$Date = row.names(USDRUB)
allUSDRUB = c(allUSDRUB, USDRUB)
}
}
plot(allUSDRUB)
rubtest = na.locf.xts(allUSDRUB)
rubtest = na.locf(allUSDRUB)
plot(allUSDRUB)
View(rubtest)
na.locf(c(1, NA, 2))
na.locf(data.frame(xx = c(1, NA, 2)))
na.locf(data.frame(xx = c(1, NA, 2), yy = c(2, NA, NA)))
swaps = full_join(swap1y, swap3m, by = 'Date')
na.locf(swaps[,2:3])
swaps = na.locf(swaps)
na.locf(swaps)
typeof(swaps)
typeof(swaps$swap1y)
swaptest = xts(x = swaps[, 2:3, drop=F], index = swaps$Date)
require(quantmod, quietly = T)
library(dplyr, quietly = T)
require(foreach)
require(tidyr)
require(ggplot2)
swaptest = xts(x = swaps[, 2:3, drop=F], index = swaps$Date)
swaptest = xts(x = swaps[, 2:3, drop=F], index = as.Date(swaps$Date))
as.Date(swaps$Date)
swaps[, 2:3, drop=F]
swaptest = .xts(x = swaps[, 2:3, drop=F], index = as.Date(swaps$Date))
as.Date(swaps$Date)
as.Date(allUSDRUB[,1])
allUSDRUB[,1]
swaps = full_join(swap1y, swap3m, by = 'Date')
swaptest = xts(x = swaps)
swaps
swaptest = as.xts(x = swaps)
swaptest = as.xts(x = swaps, order.by = swaps$Date)
View(swaptest)
swaptest = as.xts(x = swaps[,2:3,drop=F], order.by = swaps$Date)
View(swaptest)
as.xts(x = swaps[,2:3,drop=F], order.by = swaps$Date) %>% na.locf
swaptest = as.xts(x = swaps[,2:3,drop=F], order.by = swaps$Date) %>% na.locf
plot(swaptest)
plot(as.data.frame(swaptest))
require(quantmod, quietly = T)
library(dplyr, quietly = T)
require(foreach)
require(tidyr)
require(ggplot2)
View(swaptest)
require(quantmod, quietly = T)
library(dplyr, quietly = T)
require(foreach)
require(tidyr)
require(ggplot2)
View(swaptest)
swaps = full_join(swap1y, swap3m, by = 'Date')
swaps = as.xts(x = swaps[,2:3,drop=F], order.by = swaps$Date) %>% na.locf
View(swaps)
plot(swaps)
plot(cars)
gather(swaps, 'period', 'swap', 2:3)
gather(swaps, 'period', 'swap')
gather(swaps, 'period', 'swap', 1:2)
gather(as.data.frame(swaps), 'period', 'swap', 1:2)
plot(x = swaps)
plot(y = swaps)
as.data.frame(swaps)
gather(as.matrix(swaps), 'period', 'swap', 1:2)
as.matrix(swaps)
gather(as.matrix(swaps), 'period', 'swap', 1:2)
gather(as.matrix(swaps), 'period', 'swap', 2:3)
chartSeries(swaps)
chartSeries(swaps)
autoplot(swaps)
autoplot(swaps, facets = NULL)
ggplot(aes(x = Index, y = Value), data = fortify(swaps, melt=T)) + geom_line()
ggplot(aes(x = Index, y = Value), data = fortify(swaps, melt=TRUE)) + geom_line()
ggplot(aes(x = Index, y = Value), data = fortify(swaps, melt=FALSE)) + geom_line()
ggplot(aes(x = Index, y = Value), data = fortify(swaps, melt=TRUE)) + geom_line()
ggplot(aes(x = Index, y = Value), data = fortify(swaps, melt=TRUE)) + geom_point()
ggplot(aes(x = Index, y = Value, color=c('Blue', 'Red')), data = fortify(swaps, melt=TRUE)) + geom_point()
ggplot(aes(x = Index, y = Value, color=c('Blue')), data = fortify(swaps, melt=TRUE)) + geom_point()
ggplot(aes(x = Index, y = Value, color=c('blue')), data = fortify(swaps, melt=TRUE)) + geom_point()
ggplot(aes(x = Index, y = Value, color=c('red')), data = fortify(swaps, melt=TRUE)) + geom_point()
ggplot(aes(x = Index, y = Value, color='red'), data = fortify(swaps, melt=TRUE)) + geom_point()
ggplot(aes(x = Index, y = Value, color=Value), data = fortify(swaps, melt=TRUE)) + geom_point()
ggplot(aes(x = Index, y = Value, color=Value), data = fortify(swaps, melt=TRUE)) + geom_line()
ggplot(aes(x = Index, y = Value, color=Series), data = fortify(swaps, melt=TRUE)) + geom_line()
cbind.xts(allUSDRUB, swaps, all = c(T,T))
cbind.xts(allUSDRUB, swaps, all = c(T,T)) %>% na.locf
head(rubswap)
rubswap = cbind.xts(allUSDRUB, swaps, all = c(T,T)) %>% na.locf
head(rubswap)
first(rubswap)
first.xts(rubswap)
last(rubswap)
tail(rubswap)
tail(rubswap$USD.RUB)
last(rubswap$USD.RUB)
first(rubswap$USD.RUB)
swaptest=na.locf(rubswap)
View(swaptest)
na.omit(swaptest)
swaptest = na.omit(swaptest)
View(swaptest)
rubswap = cbind.xts(allUSDRUB, swaps, all = c(T,T)) %>% na.locf %>% na.omit
autoplot.zoo(rubswap)
autoplot.zoo(rubswap)
autoplot.zoo(rubswap$USD.RUB)
autoplot.zoo(rubswap[,-1])
require(quantmod, quietly = T)
library(dplyr, quietly = T)
require(foreach)
require(tidyr)
require(ggplot2)
options(scipen = 999)
rubtest = rubswap
as.data.frame(rubtest) %>% mutate(swp3 = swap3m/1000000/USD.RUB*90) %>% select(swp3)
rubtest$swap3m_perc = as.data.frame(rubtest) %>% mutate(swp3 = swap3m/1000000/USD.RUB*90) %>% select(swp3)
rm(rubtest)
rubtest = rubswap
(as.data.frame(rubtest) %>% mutate(swp3 = swap3m/1000000/USD.RUB*90) %>% select(swp3))[[1]]
rubtest$swap3m_perc = (as.data.frame(rubtest) %>% mutate(swp3 = swap3m/1000000/USD.RUB*90) %>% select(swp3))[[1]]
View(rubtest)
(as.data.frame(rubswap) %>% mutate(swp1 = swap1y/1000000/USD.RUB*365) %>% select(swp1))[[1]]
rubswap$swap3m_perc = (as.data.frame(rubswap) %>% mutate(swp3 = swap3m/1000000/USD.RUB*90) %>% select(swp3))[[1]]
rubswap$swap1y_perc = (as.data.frame(rubswap) %>% mutate(swp1 = swap1y/1000000/USD.RUB*365) %>% select(swp1))[[1]]
View(rubswap)
View(rubswap)
autoplot.zoo(rubswap[,4:5])
autoplot.zoo(rubswap[,4:5], facets = NULL)
window(rubswap[,4:5], start = '2006-01-01')
autoplot.zoo(window(rubswap[,4:5], start = '2006-01-01'), facets = NULL)
coredata(rubswap)
xtsAttributes(rubswap)
rm(USDJPY, USDRUB, plotswap, rubtest, swaptest, swaps)
rm(NAs, i, x)
View(rub)
rm(rub)
save(rubswap, file = 'rubswap')
save(rubswap, file = 'rubswap.RData')
if(2>3)
print('1')
else
print('2')
if(2>3)  print('1') else  print('2')
library("XML", lib.loc="~/R/win-library/3.1")
readHTMLTable('http://moex.com/ru/derivatives/')
readHTMLTable("http://en.wikipedia.org/wiki/List_of_countries_by_population")
detach("package:XML", unload=TRUE)
require(quantmod, quietly = T)
library(dplyr, quietly = T)
require(foreach)
require(tidyr)
require(ggplot2)
options(scipen = 999)
View(allUSDRUB)
View(rubswap)
runSD(x = rubswap$USD.RUB)
plot(runSD(x = rubswap$USD.RUB))
plot(runSD(x = rubswap$USD.RUB, n = 90*5/7))
plot(runSD(x = rubswap$USD.RUB, n = 90*5/7)/rubswap$USD.RUB)
plot(runSD(x=rubswap$USD.RUB, n=90*5/7)/rubswap$USD.RUB*(252^0.5))
plot(runSD(x=ROC(rubswap$USD.RUB), n=90*5/7)*(252^0.5))
plot(runSD(x=ROC(rubswap$USD.RUB), n=90*5/7)*(365^0.5))
plot(runSD(x=ROC(rubswap$USD.RUB), n=90*5/7)*(252^0.5))
plot(runSD(x=ROC(rubswap$USD.RUB, type = 'discrete'), n=90*5/7)*(252^0.5))
ROC(rubswap$USD.RUB, type = 'discrete')
plot(runSD(x=ROC(rubswap$USD.RUB, type = 'discrete'), n=30*5/7)*(252^0.5))
plot(runSD(x=ROC(rubswap$USD.RUB, type = 'discrete'), n=30)*(252^0.5))
plot(runSD(x=ROC(rubswap$USD.RUB, type = 'discrete'), n=30)*(365^0.5))
plot(runSD(x=ROC(rubswap$USD.RUB, type = 'discrete'), n=90)*(365^0.5))
plot(runSD(x=ROC(rubswap$USD.RUB, type = 'discrete'), n=90)*(252^0.5))
rocrub = ROC(rubswap$USD.RUB, type = 'discrete')
View(rocrub)
rocrub$sd = runSD(rocrub$USD.RUB, n = 30)
View(rocrub)
View(allUSDRUB)
rocrub = ROC(allUSDRUB$USD.RUB, type = 'discrete')
rocrub$sd = runSD(rocrub$USD.RUB, n = 30)
View(rocrub)
View(allUSDRUB)
rocrub[which(rocrub$USD.RUB!=0),]
rocrub
View(rocrub)
rocrub = ROC(allUSDRUB$USD.RUB, type = 'discrete')
View(rocrub)
rocrub$roc = rocrub[which(rocrub$USD.RUB!=0),]
View(rocrub)
rocrub = rocrub[which(rocrub$USD.RUB!=0),]
View(rocrub)
View(rocrub)
rocrub = ROC(allUSDRUB$USD.RUB, type = 'discrete')
rocrub = rocrub[which(rocrub$USD.RUB!=0),]
View(rocrub)
plot(runSD(x=ROC(rocrub$USD.RUB, type = 'discrete'), n=30)*(252^0.5))
autoplot(runSD(x=ROC(rocrub$USD.RUB, type = 'discrete'), n=30)*(252^0.5))
autoplot(runSD(rocrub$USD.RUB, n = 30)*(252^0.5))
autoplot(runSD(rocrub$USD.RUB, n = 30*5/7)*(252^0.5))
autoplot(runSD(rocrub$USD.RUB, n = 30)*(252^0.5))
install.packages("RcppBDT")
autoplot(runSD(rocrub$USD.RUB, n = 30)*(252^0.5))
require(quantmod, quietly = T)
library(dplyr, quietly = T)
require(foreach)
require(tidyr)
require(ggplot2)
autoplot(runSD(rocrub$USD.RUB, n = 30)*(252^0.5))
autoplot(runSD(rocrub$USD.RUB['2006'], n = 30)*(252^0.5))
autoplot(runSD(rocrub$USD.RUB['2006/2015'], n = 30)*(252^0.5))
autoplot(runSD(rocrub$USD.RUB['2008/2015'], n = 30)*(252^0.5))
iv = read.csv('usdrub_iv.csv')
iv = read.csv('usdrub_iv.csv', sep=';')
iv = xts(x = iv[,2:4], order.by = as.Date(iv[,1], fromat='%Y.%m.%d'))
as.Date(iv[,1], fromat='%Y.%m.%d')
iv[,1]
iv = xts(x = iv[,2:4], order.by = as.Date(iv[,1], fromat='%d.%m.%Y'))
as.Date(iv[,1], fromat='%d.%m.%Y')
iv = xts(x = iv[,2:4], order.by = as.Date(as.character(iv[,1]), fromat='%d.%m.%Y'))
as.character(iv[,1])
as.Date(as.character(iv[,1]), fromat='%d.%m.%Y')
iv = xts(x = iv[,2:4], order.by = as.Date(as.character(iv[,1]), format='%d.%m.%Y'))
View(allUSDRUB)
ROC(allUSDRUB$USD.RUB)
allUSDRUBtest = allUSDRUB[which(ROC(allUSDRUB$USD.RUB)!=0), ]
View(allUSDRUBtest)
allUSDRUB = allUSDRUB[which(ROC(allUSDRUB$USD.RUB)!=0), ]
rm(allUSDRUBtest)
View(allUSDRUB)
swaps = full_join(swap1y, swap3m, by = 'Date')
swaps = as.xts(x = swaps[,2:3,drop=F], order.by = swaps$Date) %>% na.locf
cbind.xts(allUSDRUB, swaps, all = c(T,F))
View(allUSDRUB)
View(allUSDRUB)
View(allUSDRUB['2012'])
cbind.xts(allUSDRUB, swaps, all = c(F,T))
rubswap = cbind.xts(allUSDRUB, swaps, all = c(F,T)) %>% na.locf %>% na.omit
rubmrtk = cbind.xts(rubswap, iv, all = c(T,T))
View(rubmrtk)
rubmrtk = cbind.xts(rubswap, iv, all = c(T,T)) %>% na.locf %>% na.omit
rubmrtk
rubmrtk = cbind.xts(rubswap, iv, all = c(T,T)) %>% na.omit
View(rubmrtk)
names(iv) = c('iv1m', 'iv3m', 'iv1y')
rubmrtk = cbind.xts(rubswap, iv, all = c(T,T)) %>% na.omit
View(rubmrtk)
rubmrtk$swap3m_perc = (as.data.frame(rubswap) %>% mutate(swp3 = swap3m/1000000/USD.RUB*90) %>% select(swp3))[[1]]
rubmrtk$swap3m_perc = (as.data.frame(rubmrtk) %>% mutate(swp3 = swap3m/1000000/USD.RUB*90) %>% select(swp3))[[1]]
rubmrtk$swap1y_perc = (as.data.frame(rubmrtk) %>% mutate(swp1 = swap1y/1000000/USD.RUB*365) %>% select(swp1))[[1]]
View(rubmrtk)
rub3m = rubmrtk[, c('USD.RUB', 'swap3m_perc', 'iv3m')]
View(rub3m)
names = c('rub', 'swap', 'iv')
rm(names)
names(rub3m) = c('rub', 'swap', 'iv')
View(rub3m)
rub3m$iv = rub3m$iv/100
View(rub3m)
library("fOptions", lib.loc="~/R/win-library/3.1")
require(fOptions)
as.data.frame(rub3m) %>% mutate(call = GBSOption('c', rub, rub, 90/365, swap, 0, iv)@price)
View(rub3m)
(as.data.frame(rub3m) %>% mutate(call = GBSOption('c', rub, rub, 90/365, swap, 0, iv)@price))[, c('call')]
rub3m$call = (as.data.frame(rub3m) %>% mutate(call = GBSOption('c', rub, rub, 90/365, swap, 0, iv)@price))[, c('call')]
View(rub3m)
autoplot(rub3m$call)
diff(rub3m$usd)
diff(rub3m$rub)
head(diff(rub3m$rub))
head(diff(rub3m$rub, 30))
diff(rub3m$rub, 9*5/7)
autoplot(diff(rub3m$rub, 9*5/7))
autoplot(diff(rub3m$rub, 90*5/7))
View(diff(rub3m$rub, 10))
View(diff(rub3m$rub, 90*5/7))
rub3m$rubup = diff(rub3m$rub, 90*5/7)
which(rub3m$rubup<0)
rub3m$rubup[which(rub3m$rubup<0),]
rub3m$rubup[which(rub3m$rubup<0),]=0
autoplot(rub3m$rubup)
lag(rub3m$rubup, n = 90*5/7)
View(lag(rub3m$rubup, n = 90*5/7))
View(lag(rub3m$rubup, n = -90*5/7))
View(lag(rub3m$rubup, n = -round(90*5/7))
)
View(lag(rub3m$rubup, n = -90*5/7))
View(lag(rub3m$rubup, k = -90*5/7))
View(rub3m$rubup)
(lag(rub3m$rubup, k = -90*5/7)) - rub3m$call
autoplot(lag(rub3m$rubup, k = -90*5/7) - rub3m$call)
hist((lag(rub3m$rubup, k = -90*5/7) - rub3m$call))
hist((lag(rub3m$rubup, k = -90*5/7) - rub3m$call), breaks = 20)
hist((lag(rub3m$rubup, k = -90*5/7) - rub3m$call), breaks = 30)
qqnorm((lag(rub3m$rubup, k = -90*5/7) - rub3m$call))
qqplot((lag(rub3m$rubup, k = -90*5/7) - rub3m$call))
autoplot((lag(rub3m$rubup, k = -90*5/7) - rub3m$call))
rub3m$result = (lag(rub3m$rubup, k = -90*5/7) - rub3m$call)
autoplot(rub3m$result)
head(rub3m$result)
tail(rub3m$result)
rub3m$resultperc = rub3m$result / rub3m$rub
head(rub3m$resultperc)
tail(rub3m$resultperc)
autoplot(rub3m$resultperc)
hist(rub3m$resultperc, breaks = 30)
summary(rub3m$resultperc)
autoplot(rub3m$resultperc['2010/2014'])
autoplot(rub3m$resultperc['2010/2013'])
autoplot(rub3m$resultperc['2010/2013'], geom='p')
autoplot(rub3m$resultperc['2010/2013'], geom='histogram')
autoplot(rub3m$resultperc['2010/2013'], geom='bar')
autoplot(rub3m$resultperc['2010/2013'], geom='line')
autoplot(rub3m$resultperc['2010/2013'], geom='area')
summary(rub3m$resultperc['2010/2013'])
hist(rub3m$resultperc['2010/2013'], breaks = 30)
qqtest(rub3m$resultperc, dist='normal')
qqnorm(rub3m$resultperc)
autoplot(rub3m$rubup[,1,drop=T])
qqnorm(rub3m$resultperc)
qqnorm(rub3m$resultperc[,1,drop=T])
rub3m$resultperc[,1,drop=T]
qqnorm(rub3m$resultperc[,1])
rub3m$resultperc[,1]
qqnorm(na.omit(rub3m$resultperc[,1]) )
autoplot(rub3m$resultperc['2010/2013'], geom='area')
qqnorm(na.omit(rub3m$resultperc[,1]), plot.it = T )
qqnorm(na.omit(rub3m$resultperc[,1]))
autoplot(rub3m$resultperc['2010/2013', c(1)], geom='area')
autoplot(rub3m['2010/2013', c(1:2)], geom='area')
View(rub3m)
autoplot(rub3m['2010/2013', c('iv', 'resultperc')], geom='area')
rub3m$rubupperc = rub3m$rubup / rub3m$rub
autoplot(rub3m['2010/2013', c('rubupperc', 'resultperc')], geom='area')
View(rub3m)
autoplot(rub3m['2010/2013', c('rubupperc', 'resultperc')], geom='area')
autoplot(rub3m['2010/2013', c('rubup', 'resultperc')], geom='area')
autoplot(rub3m['2010/2013', c('rubup')], geom='area')
rub3m$rubup[which(is.na( rub3m$rubup))]
rub3m$rubup[which(is.na( rub3m$rubup))] = 0
rub3m$rubupperc = rub3m$rubup / rub3m$rub
View(rub3m)
autoplot(rub3m['2010/2013', c('rubup')], geom='area')
autoplot(rub3m['2010/2013', c('rubupperc', 'resultperc')], geom='area')
rub3mp = rubmrtk[, c('USD.RUB', 'swap3m_perc', 'iv3m')]
names(rub3mp) = c('rub', 'swap', 'iv')
rub3mp$iv = rub3mp$iv/100
rub3mp = rubmrtk[, c('USD.RUB', 'swap3m_perc', 'iv3m')]
names(rub3mp) = c('rub', 'swap', 'iv')
rub3mp$iv = rub3mp$iv/100
rub3mp$put = (as.data.frame(rub3mp) %>% mutate(put = GBSOption('p', rub, rub, 90/365, swap, 0, iv)@price))[, c('put')]
autoplot(rub3mp$put)
rub3mp$rubdown = diff(rub3mp$rub, 90*5/7)
rub3mp$rubdown[which(rub3mp$rubdown>0),]=0
rub3mp$result = (-lag(rub3mp$rubdown, k = -90*5/7) - rub3mp$put)
rub3mp$resultperc = rub3mp$result / rub3mp$rub
rub3mp$rubdownperc = rub3mp$rubdown / rub3mp$rub
head(rub3m$resultperc)
tail(rub3m$resultperc)
rub3mp$rubdown[which(is.na( rub3mp$rubdown))] = 0
autoplot(rub3mp['2010/2013', c('rubdownperc', 'resultperc')], geom='area')
View(rub3mp)
rub3mp$rubdownperc[which(is.na( rub3mp$rubdownperc))] = 0
autoplot(rub3mp['2010/2013', c('rubdownperc', 'resultperc')], geom='area')
summary(rub3m$resultperc['2010/2013'])
summary(rub3mp$resultperc['2010/2013'])
summary(rub3mp$resultperc['2010/2015'])
autoplot(rub3mp['2010/2015', c('rubdownperc', 'resultperc')], geom='area')
head(rub3mp)
tail(rub3mp)
rub3mp$resultperc[which(is.na( rub3mp$resultperc))] = 0
autoplot(rub3mp['2010/2015', c('rubdownperc', 'resultperc')], geom='area')
summary(rub3mp$resultperc['2010/2015'])
hist(rub3m$resultperc['2010/2013'], breaks = 30)
hist(rub3m$resultperc['2010/2015'], breaks = 30)
hist(rub3mp$resultperc['2010/2015'], breaks = 30)
qqnorm(na.omit(rub3mp$resultperc[,1]))
